<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>AirPods</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <link rel="stylesheet" type="text/css" href="static/css/style.css"/>
    <link rel="stylesheet" type="text/css" href="static/css/main.css"/>
    <link rel="stylesheet" type="text/css" href="static/css/media.css"/>
    <link rel="stylesheet" href="static/layui/css/layui.css" media="all">
</head>

<body>
<!-- 菜单导航部分 -->
<div class="nav">
    <a href="index.html" class="logo"></a>
    <a href="maintain.html" class="text">Repair order</a>
    <a href="javascript:void(0)" class="text">Questionnaire</a>
    <a href="faq.html" class="text">FAQ</a>
    <input hidden="hidden" type="checkbox" name="choose" id="choose" value=""/>
    <label for="choose" class="toggle-btn">
        <span class="line"></span>
        <span class="line"></span>
    </label>
    <!-- 菜单导航中，隐藏的变成移动端后才显示的菜单 -->
    <div class="nav-content">
        <div class="nav-page">
            <div class="search-input">
                <div class="icon" id="search-btn"></div>
                <input type="text" name="searchName"  id="searchName" placeholder="search name"/>
            </div>
            <hr/>
            <div class="nav-list">
                <a href="index.html" class="nav-text">Home</a>
                <a href="maintain.html" class="nav-text">Repair order</a>
                <a href="javascript:void(0)" class="nav-text">Questionnaire</a>
                <a href="faq.html" class="nav-text">FAQ</a>
            </div>
        </div>
    </div>
</div>

<section class="section" id="repairStart">
    <div class="section-content page3" style="padding-top: 94px">
        <h3>We need your serial <br> number to get started.</h3>
        <form class="serial-number-form" action="#" method="post" novalidate="">
            <div class="serial-number-wrapper">
                <label for="serial-number" class="serial-number-label">Enter your serial number</label>
                <input type="text" name="sno" class="serial-number" id="serial-number" value="">
                <p class="error-text">序列号的后4位必须是H8TT、LX2Y、JMMT、LKKT、0C6L中的一个</p>
                <div class="serial-number-article"><a href="javascript: void(0);" data-method="offset" data-type="auto"
                                                      data-title="说明书" class="serial-number-btn">How
                    to find your serial number ></a>
                </div>
            </div>
            <div class="button-wrapper" id="view-selector-3">
                <button class="serial-btn" id="serial-btn" type="button">
                    <div class="button-label">Continue</div>
                </button>
            </div>
        </form>
    </div>
</section>

<script src="static/js/jquery.min.js" type="application/javascript"></script>
<script src="static/js/search.js" type="application/javascript"></script>
<script src="static/layui/layui.js" type="application/javascript"></script>
<script>
    layui.use(['layer'], function () {
        var $ = layui.jquery, layer = layui.layer;
        var layText = '<ul class="section-list section-bluetooth-list" style="margin-top: 48px">\n' +
            '            <li>\n' +
            '                <img class="section-img serial-bluetooth" src="static/images/page/serial-image11.png" alt="promo1">\n' +
            '                <div class="section-text serial-text">\n' +
            '                    <p>1. Go to Settings > Bluetooth.</p>\n' +
            '                    <p>2. Find your AirPods in the list. </p>\n' +
            '                    <p>3. Tap the Info button next to your AirPods, and you\'ll see the serial number</p>\n' +
            '                </div>\n' +
            '            </li>\n' +
            '        </ul>\n' +
            '        <ul class="serial-blue-list">\n' +
            '            <li>\n' +
            '                <img class="section-img serial-bluetooth1" src="static/images/page/serial-image1.png" alt="promo1">\n' +
            '                <p>You can find the serial number on the underside of the lid of your Charging Case or Wireless Charging Case.</p>\n' +
            '            </li>\n' +
            '            <li>\n' +
            '                <img class="section-img serial-bluetooth1" src="static/images/page/serial-image2.png" alt="promo1">\n' +
            '                <p>If you have the original packaging, you can find the serial number next to the barcode.</p>\n' +
            '            </li>\n' +
            '        </ul>';
        var question1 = '<ul class="serial-ques-list">\n' +
            '            <li><a href="question1.html?#page2">AirPods won’t charge</a></li>\n' +
            '            <li><a href="question1.html?#page3">Charging Case won’t charge</a></li>\n' +
            '            <li><a href="question1.html?#page4">AirPods Battery Service</a></li>\n' +
            '            <li><a href="question1.html?#page5">Charging Case Battery Service</a></li>\n' +
            '        </ul>';
        var question2 = ' <ul class="serial-ques-list">\n' +
            '            <li><a href="question2.html?#page2">AirPods won’t connect</a></li>\n' +
            '            <li><a href="question2.html?#page3">Unable to hear any sound</a></li>\n' +
            '            <li><a href="question2.html?#page4">AirPods keep disconnecting</a></li>\n' +
            '            <li><a href="question2.html?#page5">Microphone Issue</a></li>\n' +
            '            <li class="li-active"><a href="question2.html?#page6">Crackling, Static, or other sound issues</a></li>\n' +
            '            <li><a href="question2.html?#page7">Sensor Issues</a></li>\n' +
            '        </ul>';
        var question3 = ' <ul class="serial-ques-list">\n' +
            '            <li><a href="question3.html?#page2">AirPods physically damaged</a></li>\n' +
            '            <li><a href="question3.html?#page4">AirPods water damage</a></li>\n' +
            '            <li class="li-active"><a href="question3.html?#page3">Charging Case physically damaged</a></li>\n' +
            '            <li><a href="question3.html?#page5">Charging Case water damage</a></li>\n' +
            '        </ul>'
        var question4 = ' <ul class="serial-ques-list">\n' +
            '            <li class="li-active"><a href="question4.html?#page2">AirPods Missing</a></li>\n' +
            '            <li class="li-active"><a href="question4.html?#page3">Charging Case Missing</a></li>\n' +
            '        </ul>'
        var active = {
            offset: function (othis) {
                var type = othis.data('type');
                var item = othis.data('item');
                var title = othis.data('title');
                var text = layText;
                if (item == 'question1') {
                    text = question1;
                } else if (item == 'question2') {
                    text = question2;
                } else if (item == 'question3') {
                    text = question3;
                } else if (item == 'question4') {
                    text = question4;
                }
                var indexLayer = layer.open({
                    type: 1
                    , title: title
                    , maxWidth: 650
                    , offset: type //具体配置参考：http://www.layui.com/doc/modules/layer.html#offset
                    , id: 'layerDemo' + type //防止重复弹出
                    , content: '<div style="padding: 20px 10px 30px;">' + text + '</div>'
                    , btnAlign: 'c' //按钮居中
                    , shade: 0 //不显示遮罩
                    , yes: function () {
                        layer.closeAll();
                    }
                });
                if((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {
                    layer.full(indexLayer)
                }
            }
        }
        $('.serial-number-btn').on('click', function () {
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });

        $('.button-content-container').on('click', function () {
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });

    });
    $("#serial-btn").on("click", function () {
        var code = $("#serial-number").val();
        var subCode = code.substr(-4)
        var codeArr = ['H8TT', 'LX2Y', 'JMMT', 'LKKT', '0C6L']
        if(isInArray(codeArr, subCode)) {
            $(".error-text").hide();
            window.location.href= 'happening.html?code=' + code;
            window.event.returnValue=false;
        } else {
            $(".error-text").show();
        }
    })

    function isInArray(arr, str) {
        var curStr = ',' + arr.join(",") + ",";
        return curStr.indexOf("," + str + ",") != -1;
    }
</script>
</body>

</html>
